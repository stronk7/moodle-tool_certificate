define(["jquery","core/ajax","core/templates","core/str"],function(a,b,c,d){var e=100;return{processResults:function(b,c){var d=[];return a.isArray(c)?(a.each(c,function(a,b){d.push({value:b.id,label:b._label})}),d):c},transport:function(f,g,h,i){var j;j=b.call([{methodname:"tool_certificate_potential_certificate_selector",args:{search:g}}]),j[0].then(function(b){var f=[],g=0;return b.length<=e?(a.each(b,function(b,d){var e=d,g=[];a.each(["idnumber"],function(a,b){"undefined"!=typeof d[b]&&""!==d[b]&&(e.hasidentity=!0,g.push(d[b]))}),e.identity=g.join(", "),f.push(c.render("tool_certificate/form_certificate_selector_suggestion",e))}),a.when.apply(a.when,f).then(function(){var c=arguments;return a.each(b,function(a,b){b._label=c[g],g++}),h(b)})):d.get_string("toomanycertificatestoshow","tool_certificate",">"+e).then(function(a){return h(a)})}).fail(i)}}});