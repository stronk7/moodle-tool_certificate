define(["jquery","tool_wp/modal_form","tool_wp/tabs","core/notification","core/str","core/ajax"],function(a,b,c,d,e,f){var g=function(a,c,d){var f=new b({formClass:"tool_certificate\\form\\details",args:{id:d},modalConfig:{title:c},saveButtonText:e.get_string("save"),triggerElement:a}),g=f.onInit;return f.onInit=function(){this.modal.setSaveButtonText(e.get_string("save")),g.bind(this)()},f},h=function(b){b.preventDefault();var c=g(a(b.currentTarget),e.get_string("createtemplate","tool_certificate"),0);c.onSubmitSuccess=function(a){window.location.href=a}},i=function(b){b.preventDefault();var c=a(b.currentTarget),d=c.attr("data-id"),f=c.attr("data-name"),h=g(c,e.get_string("editcertificate","tool_certificate",f),d);h.onSubmitSuccess=function(){window.location.reload()}},j=function(c){c.preventDefault(),new b({formClass:"tool_certificate\\form\\certificate_issues",args:{tid:a(c.currentTarget).attr("data-tid")},modalConfig:{title:e.get_string("issuenewcertificates","tool_certificate")},saveButtonText:e.get_string("save"),triggerElement:a(c.currentTarget)})},k=function(c){c.preventDefault();var d=new b({formClass:"tool_certificate\\form\\tenant_selector",args:{id:a(c.currentTarget).attr("data-id")},modalConfig:{title:e.get_string("confirm")},saveButtonText:e.get_string("duplicate","tool_certificate"),triggerElement:a(c.currentTarget)});d.onSubmitSuccess=function(){window.location.reload()}},l=function(b){b.preventDefault(),e.get_strings([{key:"confirm"},{key:"duplicatetemplateconfirm",component:"tool_certificate",param:a(b.currentTarget).attr("data-name")},{key:"duplicate",component:"tool_certificate"},{key:"cancel"}]).done(function(c){d.confirm(c[0],c[1],c[2],c[3],function(){var c=f.call([{methodname:"tool_certificate_duplicate_template",args:{id:a(b.currentTarget).attr("data-id")}}]);c[0].done(function(){window.location.reload()}).fail(d.exception)})}).fail(d.exception)},m=function(b){b.preventDefault(),e.get_strings([{key:"confirm"},{key:"deletetemplateconfirm",component:"tool_certificate",param:a(b.currentTarget).attr("data-name")},{key:"delete"},{key:"cancel"}]).done(function(c){d.confirm(c[0],c[1],c[2],c[3],function(){var c=f.call([{methodname:"tool_certificate_delete_template",args:{id:a(b.currentTarget).attr("data-id")}}]);c[0].done(function(){window.location.reload()}).fail(d.exception)})}).fail(d.exception)};return{init:function(){a('[data-tabs-element="addbutton"]').on("click",h),a('[data-action="editdetails"]').on("click",i),a('[data-action="issue"]').on("click",j),a('[data-action="duplicate"][data-selecttenant="1"]').on("click",k),a('[data-action="duplicate"][data-selecttenant="0"]').on("click",l),a('[data-action="delete"]').on("click",m)}}});