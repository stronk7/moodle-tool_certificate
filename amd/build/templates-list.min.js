define ("tool_certificate/templates-list",["jquery","tool_wp/modal_form","tool_wp/tabs","core/notification","core/str","core/ajax","tool_wp/notification"],function(a,b,c,d,f,g,h){var i=function(a,c,d){var e=new b({formClass:"tool_certificate\\form\\details",args:d,modalConfig:{title:c},saveButtonText:f.get_string("save"),triggerElement:a});return e},j=function(b){var c=a(b.currentTarget).data("contextid");b.preventDefault();var d=i(a(b.currentTarget),f.get_string("createtemplate","tool_certificate"),{id:0,contextid:c});d.onSubmitSuccess=function(a){window.location.href=a}},k=function(b){b.preventDefault();var c=a(b.currentTarget),d=c.attr("data-id"),e=c.attr("data-name"),g=i(c,f.get_string("editcertificate","tool_certificate",e),{id:d});g.onSubmitSuccess=function(){window.location.reload()}},l=function(c){c.preventDefault();var d=new b({formClass:"tool_certificate\\form\\certificate_issues",args:{tid:a(c.currentTarget).attr("data-tid")},modalConfig:{title:f.get_string("issuenewcertificates","tool_certificate")},saveButtonText:f.get_string("save"),triggerElement:a(c.currentTarget)});d.onSubmitSuccess=function(a){a=parseInt(a,10);if(a){f.get_strings([{key:"oneissuewascreated",component:"tool_certificate"},{key:"aissueswerecreated",component:"tool_certificate",param:a}]).done(function(b){var c=1<a?b[1]:b[0];h.addNotification({message:c,type:"success"})})}else{f.get_strings([{key:"noissueswerecreated",component:"tool_certificate"}]).done(function(a){h.addNotification({message:a[0],type:"warning"})})}}},m=function(c){c.preventDefault();var d=new b({formClass:"tool_certificate\\form\\category_selector",args:{id:a(c.currentTarget).attr("data-id")},modalConfig:{title:f.get_string("confirm")},saveButtonText:f.get_string("duplicate","tool_certificate"),triggerElement:a(c.currentTarget)});d.onSubmitSuccess=function(){window.location.reload()}},n=function(b){b.preventDefault();f.get_strings([{key:"confirm"},{key:"duplicatetemplateconfirm",component:"tool_certificate",param:a(b.currentTarget).attr("data-name")},{key:"duplicate",component:"tool_certificate"},{key:"cancel"}]).done(function(c){d.confirm(c[0],c[1],c[2],c[3],function(){var c=g.call([{methodname:"tool_certificate_duplicate_template",args:{id:a(b.currentTarget).attr("data-id")}}]);c[0].done(function(){window.location.reload()}).fail(d.exception)})}).fail(d.exception)},o=function(b){b.preventDefault();f.get_strings([{key:"confirm"},{key:"deletetemplateconfirm",component:"tool_certificate",param:a(b.currentTarget).attr("data-name")},{key:"delete"},{key:"cancel"}]).done(function(c){d.confirm(c[0],c[1],c[2],c[3],function(){var c=g.call([{methodname:"tool_certificate_delete_template",args:{id:a(b.currentTarget).attr("data-id")}}]);c[0].done(function(){window.location.reload()}).fail(d.exception)})}).fail(d.exception)};return{init:function init(){a("body").on("click","[data-tabs-element=\"addbutton\"]",j);a("[data-action=\"editdetails\"]").on("click",k);a("[data-action=\"issue\"]").on("click",l);a("[data-action=\"duplicate\"][data-selectcategory=\"1\"]").on("click",m);a("[data-action=\"duplicate\"][data-selectcategory=\"0\"]").on("click",n);a("[data-action=\"delete\"]").on("click",o)}}});
//# sourceMappingURL=templates-list.min.js.map
